---
// Fetch data from the Google Sheets Service URL
const res = await fetch(
	"https://script.googleusercontent.com/macros/echo?user_content_key=KO6PysfeRbNAPfY3q2Uq2m6AFQCjb780vMLZf4bRydYGRJ1iNYQbeMM9qoGBfcc9yW-YNjcVUZFb-3Pwtd7QrHiWIKtVrHy6m5_BxDlH2jW0nuo2oDemN9CCS2h10ox_1xSncGQajx_ryfhECjZEnDN1gkdyndjeMCu2skDOiKNPfBOvlQbZtAm3--ixLHqWgCqIljIWYIsCpTgcrr4fV0WawHKZSYNbajy6SpOcqnJ3mOqwrFyK-tz9Jw9Md8uu&lib=MatgvNypw4b4slrx6FANXG0EnS39sQUSa"
);

// Parse the response as JSON
const data = await res.json();

// Log the parsed data to the console
console.log(data);

interface Post {
	Title: string;
	Author: string;
	Date: string;
	Content: string;
}
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <title>My Blog</title>
    <style>
      /* Container Styles */
      .container {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        margin: 20px;
      }
      /* Card Styles */
      .card {
        background-color: #fff;
        width: 300px;
        margin: 15px;
        padding: 20px;
        border-radius: 8px;
        box-sizing: border-box;
        flex: 1 1 calc(33% - 30px);
      }
      .card h2 {
        margin-top: 0;
      }
      .card small {
        color: #888;
      }
      .card p {
        line-height: 1.6;
      }
      /* Responsive Adjustments */
      @media (max-width: 900px) {
        .card {
          flex: 1 1 calc(50% - 30px);
        }
      }
      @media (max-width: 600px) {
        .card {
          flex: 1 1 100%;
        }
      }
      /* Footer Styles */
      footer {
        color: #333;
        text-align: center;
        padding: 10px 0;
        position: fixed;
        width: 100%;
        bottom: 0;
      }
      body {
        margin: 0;
        font-family: Arial, sans-serif;
        background-color: #f0f0f0;
      }
      h1 {
        text-align: center;
        margin-top: 60px;
      }

			a {
				color: #222;
				text-decoration: none;
			}
    </style>
  </head>
  <body>
    <h1>My Blog</h1>
    <!-- Card Container -->
    <div class="container">
      {data.date.map((post: Post) => (
        <div class="card">
          <h2>{post.Title}</h2>
          <p><small>By {post.Author} on {new Date(post.Date).toLocaleDateString()}</small></p>
          <p>{post.Content}</p>
        </div>
      ))}
    </div>
    <!-- Footer -->
    <footer>
      <p>AstroSheets Â© {new Date().getFullYear()} made by <a href="https://www.aspecs.ch/en">aspecs</a>.</p>
    </footer>
  </body>
</html>